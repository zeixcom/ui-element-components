/* Shiki syntax highlighting styling for code-block component */

/* Base styling for Shiki-highlighted code */
code-block pre {
  font-family: var(--font-family-mono, monospace);
  tab-size: 4;
  -moz-tab-size: 4;
  -o-tab-size: 4;
  line-height: 1.5;
  overflow-x: auto;
}

/* Ensure code inside pre has proper styling */
code-block pre > code {
  display: block;
  overflow-x: visible;
  padding: 0;
  white-space: pre;
  word-break: normal;
  word-spacing: normal;
  word-wrap: normal;
  font-size: var(--font-size-s, 0.875rem);
}

/* Fine-tune shiki theme containers to match our component */
code-block pre.shiki,
code-block .shiki {
  background-color: transparent !important; /* Let our component handle background */
  padding: 0 !important;
  margin: 0 !important;
  border-radius: 0 !important;
}

/* Dark theme adjustments if needed */
html[data-theme="dark"] code-block pre > code[data-theme="github-light"],
html[data-theme="dark"] code-block pre > code[data-theme="slack-ochin"] {
  --shiki-color-background: var(--color-gray-90, #1e1e1e);
}

/* Light theme adjustments if needed */
html[data-theme="light"] code-block pre > code[data-theme="github-dark"],
html[data-theme="light"] code-block pre > code[data-theme="dracula"],
html[data-theme="light"] code-block pre > code[data-theme="nord"],
html[data-theme="light"] code-block pre > code[data-theme="monokai"],
html[data-theme="light"] code-block pre > code[data-theme="material-darker"] {
  --shiki-color-background: var(--color-gray-90, #1e1e1e);
}

/* Line highlighting for specific line numbers */
code-block .highlighted-line {
  background-color: rgba(255, 255, 255, 0.1);
  display: block;
  margin: 0 -1rem;
  padding: 0 1rem;
}

/* Focus styling when line is highlighted */
code-block .highlighted-line:focus {
  outline: 1px solid var(--color-primary, #5c9fd6);
  background-color: rgba(92, 159, 214, 0.1);
}

/* Additional helper for line numbers if needed */
code-block .line-number::before {
  content: attr(data-line);
  color: var(--color-text-soft, #888);
  display: inline-block;
  width: 1rem;
  margin-right: 1rem;
  text-align: right;
  color: rgba(115, 138, 148, 0.4);
}

/* Animation for token highlighting */
@keyframes token-highlight {
  0% { background-color: transparent; }
  20% { background-color: rgba(255, 255, 100, 0.2); }
  100% { background-color: transparent; }
}

code-block .token-highlight {
  animation: token-highlight 1.5s ease-in-out;
}